/**
 ⚠️ Design System — Protected file
 Do not edit this file without prior approval from the Design System team.
 */

import React from 'react'
import Animated, {
  Easing,
  useAnimatedStyle,
  useDerivedValue,
  withRepeat,
  withTiming,
} from 'react-native-reanimated'
import styled from 'styled-components/native'

import { Logo } from 'ui/svg/icons/Logo'
import { AccessibleIcon } from 'ui/svg/icons/types'

export const ButtonLoadingIndicator = ({ size, color, testID }: AccessibleIcon) => {
  const rotation = useDerivedValue(() =>
    withRepeat(withTiming(1, { duration: 1200, easing: Easing.linear }), -1, false)
  )

  const animatedStyle = useAnimatedStyle(
    () => ({
      transform: [{ rotate: `${rotation.value * 360}deg` }],
    }),
    [rotation]
  )

  return (
    <SpinnerContainer testID={testID}>
      <Animated.View style={[{ width: Number(size) }, animatedStyle]}>
        <Logo size={size} color={color} />
      </Animated.View>
    </SpinnerContainer>
  )
}

const SpinnerContainer = styled.View({
  alignItems: 'center',
})
