/**
 ⚠️ Design System — Protected file
 Do not edit this file without prior approval from the Design System team.
 */

import type { Meta } from '@storybook/react-vite'
import React from 'react'
import styled from 'styled-components/native'

import { theme } from 'theme'
import { VariantsTemplate, type Variants, type VariantsStory } from 'ui/storybook/VariantsTemplate'
import { Invalidate } from 'ui/svg/icons/Invalidate'
import { PlainArrowNext } from 'ui/svg/icons/PlainArrowNext'

import { Button } from './Button'

const meta: Meta<typeof Button> = {
  title: 'design system/Button',
  component: Button,
}
export default meta

const AlignStart = styled.View({
  alignItems: 'flex-start',
})

const AlignedButton = (props: React.ComponentProps<typeof Button>) => (
  <AlignStart>
    <Button {...props} />
  </AlignStart>
)

const baseLabel = 'Continuer'

const primaryCases: Variants<typeof Button> = [
  { label: 'Primary default', props: { wording: baseLabel, variant: 'primary' } },
  { label: 'Primary hover', props: { wording: baseLabel, variant: 'primary', hovered: true } },
  { label: 'Primary disabled', props: { wording: baseLabel, variant: 'primary', disabled: true } },
  {
    label: 'Primary icon left',
    props: { wording: baseLabel, variant: 'primary', icon: Invalidate },
  },
  {
    label: 'Primary icon right',
    props: {
      wording: baseLabel,
      variant: 'primary',
      icon: PlainArrowNext,
      iconPosition: 'right',
    },
  },
  {
    label: 'Primary icon button',
    props: {
      variant: 'primary',
      icon: Invalidate,
      iconButton: true,
      accessibilityLabel: 'Fermer',
    },
  },
  {
    label: 'Primary small',
    props: { wording: baseLabel, variant: 'primary', size: 'small' },
  },
  {
    label: 'Primary default full width',
    props: { wording: baseLabel, variant: 'primary', fullWidth: true },
  },
  {
    label: 'Primary loading',
    props: { wording: baseLabel, variant: 'primary', isLoading: true, fullWidth: true },
  },
  {
    label: 'Primary neutral default',
    props: { wording: baseLabel, variant: 'primary', color: 'neutral' },
  },
  {
    label: 'Primary neutral icon left',
    props: { wording: baseLabel, variant: 'primary', color: 'neutral', icon: Invalidate },
  },
]

const secondaryBrandCases: Variants<typeof Button> = [
  { label: 'Secondary brand default', props: { wording: baseLabel, variant: 'secondary' } },
  {
    label: 'Secondary brand hover',
    props: { wording: baseLabel, variant: 'secondary', hovered: true },
  },
  {
    label: 'Secondary brand disabled',
    props: { wording: baseLabel, variant: 'secondary', disabled: true },
  },
  {
    label: 'Secondary brand icon left',
    props: { wording: baseLabel, variant: 'secondary', icon: Invalidate },
  },
  {
    label: 'Secondary brand icon right',
    props: {
      wording: baseLabel,
      variant: 'secondary',
      icon: PlainArrowNext,
      iconPosition: 'right',
    },
  },
  {
    label: 'Secondary brand icon button',
    props: {
      variant: 'secondary',
      icon: Invalidate,
      iconButton: true,
      accessibilityLabel: 'Fermer',
    },
  },
  {
    label: 'Secondary brand transparent',
    props: { wording: baseLabel, variant: 'secondary', transparent: true },
    withBackground: true,
  },
  {
    label: 'Secondary brand small',
    props: { wording: baseLabel, variant: 'secondary', size: 'small' },
  },
]

const secondaryNeutralCases: Variants<typeof Button> = [
  {
    label: 'Secondary neutral default',
    props: { wording: baseLabel, variant: 'secondary', color: 'neutral' },
  },
  {
    label: 'Secondary neutral hover',
    props: { wording: baseLabel, variant: 'secondary', color: 'neutral', hovered: true },
  },
  {
    label: 'Secondary neutral disabled',
    props: { wording: baseLabel, variant: 'secondary', color: 'neutral', disabled: true },
  },
  {
    label: 'Secondary neutral icon left',
    props: { wording: baseLabel, variant: 'secondary', color: 'neutral', icon: Invalidate },
  },
  {
    label: 'Secondary neutral icon right',
    props: {
      wording: baseLabel,
      variant: 'secondary',
      color: 'neutral',
      icon: PlainArrowNext,
      iconPosition: 'right',
    },
  },
  {
    label: 'Secondary neutral icon button',
    props: {
      variant: 'secondary',
      color: 'neutral',
      icon: Invalidate,
      iconButton: true,
      accessibilityLabel: 'Fermer',
    },
  },
  {
    label: 'Secondary neutral transparent',
    props: {
      wording: baseLabel,
      variant: 'secondary',
      color: 'neutral',
      transparent: true,
    },
    withBackground: true,
  },
  {
    label: 'Secondary neutral small',
    props: { wording: baseLabel, variant: 'secondary', color: 'neutral', size: 'small' },
  },
]

const tertiaryBrandCases: Variants<typeof Button> = [
  { label: 'Tertiary brand default', props: { wording: baseLabel, variant: 'tertiary' } },
  {
    label: 'Tertiary brand hover',
    props: { wording: baseLabel, variant: 'tertiary', hovered: true },
  },
  {
    label: 'Tertiary brand disabled',
    props: { wording: baseLabel, variant: 'tertiary', disabled: true },
  },
  {
    label: 'Tertiary brand icon left',
    props: { wording: baseLabel, variant: 'tertiary', icon: Invalidate },
  },
  {
    label: 'Tertiary brand icon right',
    props: {
      wording: baseLabel,
      variant: 'tertiary',
      icon: PlainArrowNext,
      iconPosition: 'right',
    },
  },
  {
    label: 'Tertiary brand icon button',
    props: {
      variant: 'tertiary',
      icon: Invalidate,
      iconButton: true,
      accessibilityLabel: 'Fermer',
    },
  },
  {
    label: 'Tertiary brand small',
    props: { wording: baseLabel, variant: 'tertiary', size: 'small' },
  },
]

const tertiaryNeutralCases: Variants<typeof Button> = [
  {
    label: 'Tertiary neutral default',
    props: { wording: baseLabel, variant: 'tertiary', color: 'neutral' },
  },
  {
    label: 'Tertiary neutral hover',
    props: { wording: baseLabel, variant: 'tertiary', color: 'neutral', hovered: true },
  },
  {
    label: 'Tertiary neutral disabled',
    props: { wording: baseLabel, variant: 'tertiary', color: 'neutral', disabled: true },
  },
  {
    label: 'Tertiary neutral icon left',
    props: { wording: baseLabel, variant: 'tertiary', color: 'neutral', icon: Invalidate },
  },
  {
    label: 'Tertiary neutral icon right',
    props: {
      wording: baseLabel,
      variant: 'tertiary',
      color: 'neutral',
      icon: PlainArrowNext,
      iconPosition: 'right',
    },
  },
  {
    label: 'Tertiary neutral icon button',
    props: {
      variant: 'tertiary',
      color: 'neutral',
      icon: Invalidate,
      iconButton: true,
      accessibilityLabel: 'Fermer',
    },
  },
  {
    label: 'Tertiary neutral small',
    props: { wording: baseLabel, variant: 'tertiary', color: 'neutral', size: 'small' },
  },
]

const variantConfig: Variants<typeof Button> = [
  ...primaryCases,
  ...secondaryBrandCases,
  ...secondaryNeutralCases,
  ...tertiaryBrandCases,
  ...tertiaryNeutralCases,
]

export const Template: VariantsStory<typeof Button> = {
  name: 'Button',
  render: (props) => {
    const variantsWithBackground = variantConfig.map((variant) =>
      variant.withBackground
        ? {
            ...variant,
            backgroundColor: theme.designSystem.color.background.decorative01,
            color: theme.designSystem.color.text.default,
          }
        : variant
    )
    return (
      <VariantsTemplate
        variants={variantsWithBackground}
        Component={AlignedButton}
        defaultProps={{ ...props }}
      />
    )
  },
}
