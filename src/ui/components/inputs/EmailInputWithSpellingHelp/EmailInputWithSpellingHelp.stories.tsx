import { ComponentStory, ComponentMeta } from '@storybook/react'
import React from 'react'
import { Controller, useForm } from 'react-hook-form'

import { EmailInputWithSpellingHelp } from './EmailInputWithSpellingHelp'

const meta: ComponentMeta<typeof EmailInputWithSpellingHelp> = {
  title: 'ui/inputs/EmailInputWithSpellingHelp',
  component: EmailInputWithSpellingHelp,
}
export default meta

const Template: ComponentStory<typeof EmailInputWithSpellingHelp> = (props) => {
  const { control } = useForm<{ email: string }>({
    defaultValues: {
      email: props.email,
    },
  })

  return (
    <Controller
      control={control}
      name="email"
      render={({ field: { onChange, onBlur, value } }) => (
        <EmailInputWithSpellingHelp
          {...props}
          email={value}
          onEmailChange={onChange}
          onBlur={onBlur}
        />
      )}
    />
  )
}

export const WithGoodEmail = Template.bind({})
WithGoodEmail.args = {
  label: 'Adresse e-mail',
  email: 'firstname.lastname@gmail.com',
}

export const WithSpellingHelp = Template.bind({})
WithSpellingHelp.args = {
  label: 'Adresse e-mail',
  email: 'firstname.lastname@gmal.com',
}
