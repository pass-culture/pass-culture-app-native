appId: ${MAESTRO_APP_ID}
---
- tapOn:
    text: 'Informations légales'
    index: 1

- assertVisible: 'Informations légales'
- assertVisible: 'Mentions légales'
- tapOn:
    id: "Nouvelle fenêtre\_: Conditions Générales d’Utilisation"
- waitForAnimationToEnd

- runFlow: # Si cloud
    when:
      notVisible:
        id: 'com.android.systemui:id/back'
    commands:
      - pressKey: back
      - pressKey: back
    
- doubleTapOn: # Permet de quitter le browser in-app
    id: 'com.android.systemui:id/back'
    optional: true

- runFlow: # Fallback si problème de retour
    when:
      visible: 'Autres'
    commands:
      - tapOn:
          text: 'Informations légales'
          index: 1

- tapOn:
    id: "Nouvelle fenêtre\_: Charte de protection des données personnelles"
- 'waitForAnimationToEnd'
- runFlow: # Si cloud
    when:
      notVisible:
        id: 'com.android.systemui:id/back'
    commands:
      - pressKey: back
      - pressKey: back
    
- doubleTapOn: # Permet de quitter le browser in-app
    id: 'com.android.systemui:id/back'
    optional: true

- runFlow: # Si cloud
    when:
      notVisible:
        id: 'com.android.systemui:id/back'
    commands:
      - pressKey: back

- tapOn:
    id: 'com.android.systemui:id/back'
    optional: true

- runFlow: # Fallback si problème de retour
    when:
      visible: 'Bonjour Test-e2e'
    commands:
      - tapOn:
          id: 'Mon profil'
