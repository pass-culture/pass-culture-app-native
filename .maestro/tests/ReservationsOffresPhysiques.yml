appId: ${APP_ID}
---
- runFlow: reusableFlows/LaunchApp.yml # Launch App
- runFlow:
    when:
      visible: "Respect de ta vie privée"
    file: "reusableFlows/FirstLaunch.yml" # First Launch
- runFlow:
    when:
      visible: "Rechercher des offres"
    file: "reusableFlows/components/buttons/SimpleActionButtonSearchOffers.yml"
- runFlow:
    when:
      visible: "Recherche"
    file: "reusableFlows/components/buttons/SimpleActionButtonSearch.web.yml"
- tapOn: "Films, séries, cinéma"

# TODO(PC-25008) : trouver une solution pour cliquer sans passer par la position (actuellement il est simplement possible de cliquer en connaissant l'offre).
- tapOn: ${NOM_OFFRE_PHYSIQUE} # nom de l'offre consultable
- runFlow: reusableFlows/components/buttons/SimpleActionButtonBookerOffer.yml
- runFlow: reusableFlows/features/auth/ToLogin.yml # Se connecter
- runFlow: reusableFlows/components/buttons/DoubleActionButtonConnect.yml
- runFlow: reusableFlows/components/buttons/SimpleActionButtonLater.yml
- runFlow:
    when:
      visible: "Rechercher des offres"
    file: "reusableFlows/components/buttons/SimpleActionButtonSearchOffers.yml"
- runFlow:
    when:
      visible: "Recherche"
    file: "reusableFlows/components/buttons/SimpleActionButtonSearch.web.yml"
- tapOn: "Catégories"
- tapOn: "Films, séries, cinéma"
- runFlow: reusableFlows/components/buttons/SimpleActionButtonSearch.yml
# TODO(PC-25008) : trouver une solution pour cliquer sans passer par la position
- tapOn: ${NOM_OFFRE_PHYSIQUE}  # nom de l'offre consultable
- runFlow: reusableFlows/components/buttons/SimpleActionButtonBookerOffer.yml
- runFlow: reusableFlows/features/bookOffer/PreBookingPage.yml # PreBookingReservation
- runFlow: reusableFlows/components/buttons/SimpleActionButtonConfirmReservation.yml
- runFlow: reusableFlows/features/bookOffer/BookingConfirmationPage.yml # BookingConfirmationPage
- tapOn: "Voir ma réservation"
- assertVisible: "Ma réservation"
- tapOn:
      id: "animated-icon-back"
- assertVisible:
      text: "Mes réservations"
      index: 0
- assertVisible: "Mes réservations"
# TODO(PC-25008) : trouver une solution pour cliquer sans passer par la position
- tapOn:
      point: "61%,16%"
- scrollUntilVisible:
      element: "Annuler ma réservation"
      direction: DOWN
- runFlow: reusableFlows/components/buttons/SimpleActionButtonCancelMyReservation.yml
- runFlow: reusableFlows/features/bookings/BookingCancellationPage.yml # BookingCancellationPage
- runFlow: reusableFlows/components/buttons/SimpleActionButtonCancelMyReservation.yml
- assertVisible: "Réservations terminées"
- runFlow: reusableFlows/StopApp.yml # Stop App