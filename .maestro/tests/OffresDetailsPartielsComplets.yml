appId: ${APP_ID}
---
- runFlow: reusableFlows/LaunchApp.yml # Launch App
- runFlow:
    when:
      visible: "Respect de ta vie privée"
    file: "reusableFlows/FirstLaunch.yml" # First Launch
- runFlow:
    when:
      visible: "Rechercher des offres"
    file: "reusableFlows/components/buttons/DoubleActionButtonSearchOffers.yml"
- runFlow:
    when:
      visible: "Recherche"
    file: "reusableFlows/components/buttons/SimpleActionButtonSearch.web.yml"
- tapOn: "Films, séries, cinéma"
- runFlow:
    when:
      visible: ${NOM_OFFRE_PHYSIQUE}
    file: "reusableFlows/components/buttons/SimpleActionButtonSelectionOffer.yml"
- scrollUntilVisible:
    element: ${NOM_OFFRE_PHYSIQUE}
    direction: DOWN
- tapOn: ${NOM_OFFRE_PHYSIQUE}
- runFlow: reusableFlows/components/buttons/SimpleActionButtonBookerOffer.yml
- runFlow: reusableFlows/features/auth/ToLogin.yml # Se connecter
- runFlow: reusableFlows/components/buttons/DoubleActionButtonConnect.yml
- runFlow: reusableFlows/components/buttons/SimpleActionButtonLater.yml
- runFlow:
    when:
      visible: "Rechercher des offres"
    file: "reusableFlows/components/buttons/SimpleActionButtonSearchOffers.yml"
- runFlow:
    when:
      visible: "Recherche"
    file: "reusableFlows/components/buttons/SimpleActionButtonSearch.web.yml"

- tapOn: "Offre, artiste, lieu culturel..."
- inputText: ${NOM_OFFRE_EVENT}
- pressKey: Enter

- runFlow:
    when:
      visible: "Voir tous les filtres\_: 2 filtres actifs"
    file: "reusableFlows/components/buttons/SimpleActionButtonTwoFilter.yml"
- runFlow:
    when:
      visible: "Voir tous les filtres\_: 1 filtre actif"
    file: "reusableFlows/components/buttons/SimpleActionButtonOneFilter.yml"

- runFlow: reusableFlows/components/buttons/SimpleActionButtonDateAndHour.yml
- runFlow: reusableFlows/components/buttons/SimpleIdButtonSwitchDate.yml
- runFlow: reusableFlows/components/buttons/SimpleActionButtonThisWeek.yml

- tapOn:
    id: "Interrupteur date"

- runFlow:
    when:
      visible: "Appliquer le filtre"
    file: "reusableFlows/components/buttons/SimpleActionButtonFilterApply.yml"

- runFlow:
    when:
      visible: "Rechercher"
    file: "reusableFlows/components/buttons/SimpleActionButtonSearch.yml"

# TODO(PC-25008) : trouver une solution pour cliquer sans passer par le nom de l'offre
- tapOn:
    text: ${NOM_OFFRE_EVENT}
    index: 1

- assertVisible: "Visite"
- assertVisible: "À deux\_!"


- scrollUntilVisible:
      element: "voir plus"
      direction: DOWN
- tapOn: "voir plus"

- assertVisible: "Durée"

- runFlow: reusableFlows/components/buttons/SimpleActionButtonIconBack.yml
- tapOn:
      id: "final-animated-icon-back"
- runFlow: reusableFlows/components/buttons/SimpleActionButtonIconBack.yml
- runFlow: reusableFlows/StopApp.yml # Stop App