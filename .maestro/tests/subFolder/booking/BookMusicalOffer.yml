appId: ${MAESTRO_APP_ID}
---
- assertVisible: 'Rechercher'
- runFlow:
    when:
      visible: 'Ma position'
    commands:
      - tapOn: 'Ma position'
      - tapOn: 'France entière'

- runFlow:
    label: 'Swipe vers les offres pour éviter tap sur la tabBar'
    when:
      platform: iOS
    commands:
      - swipe:
          start: 50%, 49%
          end: 50%, 37%

- tapOn: 'CD'

- runFlow:
    when:
      visible: 'Voir ma réservation'
    commands:
      - tapOn: 'Voir ma réservation'
      - scrollUntilVisible:
          element: 'Annuler ma réservation'
      - tapOn: 'Annuler ma réservation' # TODO(PC-36108) améliorer les perfs pour éviter de devoir cliquer deux fois sur ce bouton
      - tapOn: 'Annuler ma réservation'

- runFlow:
    when:
      platform: Android
    commands:
      - tapOn:
          id: sticky-booking-button
- runFlow:
    when:
      platform: iOS
    commands:
      - tapOn: 'Réserver l’offre'

- assertVisible: 'Détails de la réservation'
- tapOn: 'J’ai lu et j’accepte les conditions générales d’utilisation - obligatoire'
- runFlow:
    when:
      platform: Android
    commands:
      - scrollUntilVisible:
          element: 'Confirmer la réservation'
- runFlow:
    when:
      platform: iOS
    commands:
      - scroll
- doubleTapOn: 'Confirmer la réservation'

- assertVisible: "Réservation confirmée\_!"
- tapOn: 'Voir ma réservation'

- runFlow:
    when:
      platform: iOS
      visible: 'Plus tard'
    commands:
      - tapOn: 'Plus tard'

- scrollUntilVisible:
    element: 'Annuler ma réservation'
- tapOn: 'Annuler ma réservation'
- tapOn: 'Annuler ma réservation'
