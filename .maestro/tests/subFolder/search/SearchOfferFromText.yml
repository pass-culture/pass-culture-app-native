appId: ${MAESTRO_APP_ID}
---
- assertVisible: 'Rechercher'

- runFlow:
    when:
      visible: 'Ma position'
    commands:
      - tapOn: 'Ma position'
      - tapOn: 'Localisation – Liste - Élément 3 sur 3 - France entière.*'

- tapOn: 'Champs de texte - Rechercher dans le catalogue'

- inputText: 'One piece'
- pressKey: Enter

- tapOn:
    id: 'Voir tous les filtres'
- tapOn: '.*Prix.*'
- tapOn:
    id: 'Entrée pour le prix maximum'
- inputText: '50'
- pressKey: Enter
- tapOn: 'Appliquer le filtre'

- tapOn: '.*Accessibilité.*'

- tapOn: 'Appliquer le filtre'

- tapOn: 'Rechercher'

- swipe:
    from:
      text: 'Les lieux culturels près de toi'
    direction: UP

- runFlow:
    when:
      platform: Android
    commands:
      - tapOn:
          text: 'One piece.*'
          index: 1

- runFlow:
    when:
      platform: iOS
    commands:
      - assertWithAI:
          assertion: Verify that search results are displayed and all visible results are related to 'One Piece' manga or anime content. Each result should clearly indicate it's a book or digital content about One Piece, with titles or descriptions containing relevant terms like 'One Piece'
      - tapOn:
          point: 50%,72%
